
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Marble &mdash; Free HTML5 Bootstrap Website Template by FreeHTML5.co</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by FreeHTML5.co" />
	<meta name="keywords" content="free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="FreeHTML5.co" />

  	<!-- 
	//////////////////////////////////////////////////////

	FREE HTML5 TEMPLATE 
	DESIGNED & DEVELOPED by FreeHTML5.co
		
	Website: 		http://freehtml5.co/
	Email: 			info@freehtml5.co
	Twitter: 		http://twitter.com/fh5co
	Facebook: 		https://www.facebook.com/fh5co

	//////////////////////////////////////////////////////
	-->

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">

	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="../../css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="../../css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="../../css/bootstrap.css">
	<!-- Flexslider  -->
	<link rel="stylesheet" href="../../css/flexslider.css">
	<!-- Theme style  -->
	<link rel="stylesheet" href="../../css/style.css">
  <!-- 이 파일의 style -->
	<link rel="stylesheet" href="./list.css">

  <script src="../../js/jquery.min.js"></script>

	<!-- Modernizr JS -->
	<script src="../../js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></s>
	<![endif]-->

  <!-- 
    contentTypeId : 관광타입
      39 : 음식점
    cat1 : 대분류 코드
      A05 : 음식
    cat2 : 중분류 코드
      A0502 : 음식점
    cat3 : 소분류 코드
      A05020100 : 한식
      A05020200 : 서양식
      A05020300 : 일식
      A05020400 : 중식
      A05020700 : 이색음식점
      A05020900 : 카페/전통찻집
      A05021000 : 클럽
   -->

  <script>
    let pageNo = 1;
    let numOfRows = 12;
    let totalCount = 0;
    let selectedCategory = ""  // default : 전체
    $(function () {
        // $(".loading").hide();

        getRestaurantsList(pageNo, selectedCategory);

        // $(".more").click(function () {
        //   $(this).remove();
        //   pageNo++;
        //   getRestaurantsList(pageNo, selectedCategory);
        // });
        $('#cat3').change(function () {
          selectedCategory = $(this).val();
        })
        $('#search').click(function () {
          $(".wrapper-restaurants-list").html('')
          getRestaurantsList(pageNo, selectedCategory);
        })
      });

      function getRestaurantsList(pageNo, selectedCategory) {
        console.log(pageNo, selectedCategory)
        $(".loading").show();
        const apiKey =
        "EmPrDl5kZrOzoYiaEQ1J%2BrysQf8dbws8ZMv4KCelNelSrm4hGQfxXmg2X6jumQex%2FRK72yCvA5fNzAs%2F9LFkpQ%3D%3D";
        const url = `http://apis.data.go.kr/B551011/KorService1/areaBasedList1?numOfRows=${numOfRows}&pageNo=${pageNo}&MobileOS=ETC&MobileApp=AppTest&ServiceKey=${apiKey}&listYN=Y&arrange=A&contentTypeId=39&areaCode=&sigunguCode=&cat1=A05&cat2=A0502&cat3=${selectedCategory}&_type=json`
        $.ajax({
          url: url, // 데이터를 수신 받을 서버 주소
          type: "get", // 통신방식(GET, POST, PUT, DELETE)
          dataType: "json", // 수신 받을 데이터 타입
          async: false,
          success: function (data) {
            // 통신이 성공했을 때 호출되는 콜백함수
            console.log(data);
            parsingData(data);
          },
          err: function () {
            // 통신이 실패(부정적인 response) 했을 때 호출되는 콜백함수
          },
          complete: function () {
            // 통신이 완료되었을 때 호출 되는 콜백함수
            $(".loading").hide();
          },
        });
      

        function parsingData(restaurantsData) {
          const restaurantsArr = restaurantsData.response.body.items.item;
          console.log(restaurantsArr);

          totalCount = restaurantsData.response.body.totalCount;

          $.each(restaurantsArr, function (i, item) {
            const contentId = item.contentid;

            let output = `<div
  class="col-md-3 col-sm-6 col-padding animate-box"
  data-animate-effect="fadeInLeft"
>
  <div class="blog-entry">
    <a href="#" class="blog-img"
      ><img
        src="${item.firstimage != '' ? item.firstimage : (item.firstimage2 != '' ? item.firstimage2 : '../../images/noimage_restaurants.png')}"
        class="img-responsive"
        alt="Free HTML5 Bootstrap Template by FreeHTML5.co"
    /></a>
    <div class="desc">
      <h3><a href="#" title="${item.title}">${item.title}</a></h3>
      <p>
        ${item.addr1}${item.addr2 != '' ? ' ' + item.addr2 : ''}
      </p>
      <span><small>등록일 : ${stringToDate(item.createdtime)}</small><br>
      <small>수정일 : ${stringToDate(item.modifiedtime)}</small></span>
      <a href="#" class="lead">자세히 보기 <i class="icon-arrow-right3"></i></a>
    </div>
  </div>
</div>
`
          $(".wrapper-restaurants-list").append(output);
        })
      }
    }
        function stringToDate (str) {
          let year = str.substr(0, 4);
          let month = str.substr(4, 2);
          let date = str.substr(6, 2);
          let hour = str.substr(8, 2);
          let minute = str.substr(10, 2);
          let second = str.substr(12, 2);
          // console.log(year, month, date, hour, minute, second)
          return `${year}년 ${month}월 ${date}일 ${hour}:${minute}:${second}`
        }
  </script>

	</head>
	<body>
	<div id="fh5co-page">
		<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
		<aside id="fh5co-aside" role="complementary" class="border js-fullheight">

			<h1 id="fh5co-logo"><a href="../../index.html">Goott Tour</a></h1>
			<nav id="fh5co-main-menu" role="navigation">
				<ul>
					<li><a href="index.html">Home</a></li>
					<li class="fh5co-active"><a href="list.html">Restaurants</a></li>
					<li><a href="#">Noname</a></li>
					<li><a href="#">Noname</a></li>
					<li><a href="#">Noname</a></li>
				</ul>
			</nav>

			<div class="fh5co-footer">
				<p><small>&copy; 2016 Blend Free HTML5. All Rights Reserved.</span> <span>Designed by <a href="http://freehtml5.co/" target="_blank">FreeHTML5.co</a> </span> <span>Demo Images: <a href="https://unsplash.com/" target="_blank">Unsplash</a></span></small></p>
				<ul>
					<li><a href="#"><i class="icon-facebook2"></i></a></li>
					<li><a href="#"><i class="icon-twitter2"></i></a></li>
					<li><a href="#"><i class="icon-instagram"></i></a></li>
					<li><a href="#"><i class="icon-linkedin2"></i></a></li>
				</ul>
			</div>

		</aside>

		<div id="fh5co-main">
			<div class="fh5co-narrow-content">
				<h2 class="fh5co-heading animate-box" data-animate-effect="fadeInLeft">Read Our Blog</h2>
        <div class="wrapper-category">
          <select name="cat3" id="cat3">
            <option value="">전체</option>
            <option value="A05020100">한식</option>
            <option value="A05020200">서양식</option>
            <option value="A05020300">일식</option>
            <option value="A05020400">중식</option>
            <option value="A05020700">이색음식점</option>
            <option value="A05020900">카페/전통찻집</option>
            <option value="A05021000">클럽</option>
          </select>
          <a href="#" class="btn btn-primary" id="search">검색</a>
        </div>
				<div class="row row-bottom-padded-md wrapper-restaurants-list">

					<!-- <div class="col-md-3 col-sm-6 col-padding animate-box" data-animate-effect="fadeInLeft">
						<div class="blog-entry">
							<a href="#" class="blog-img"><img src="../../images/img-1.jpg" class="img-responsive" alt="Free HTML5 Bootstrap Template by FreeHTML5.co"></a>
							<div class="desc">
								<h3><a href="#">Inspirational Website</a></h3>
								<span><small>by Admin </small> / <small> Web Design </small> / <small> <i class="icon-comment"></i> 14</small></span>
								<p>Design must be functional and functionality must be translated into visual aesthetics</p>
								<a href="#" class="lead">Read More <i class="icon-arrow-right3"></i></a>
							</div>
						</div>
					</div> -->

				</div>
			</div>
		
			<!-- <div id="get-in-touch">
				<div class="fh5co-narrow-content">
					<div class="row">
						<div class="col-md-4 animate-box" data-animate-effect="fadeInLeft">
							<h1 class="fh5co-heading-colored">Get in touch</h1>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6 col-md-offset-3 col-md-pull-3 animate-box" data-animate-effect="fadeInLeft">
							<p class="fh5co-lead">Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
							<p><a href="#" class="btn btn-primary">Learn More</a></p>
						</div>
						
					</div>
				</div>
			</div> -->

		</div>
	</div>

	<!-- jQuery -->
	<script src="../../js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="../../js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="../../js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="../../js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="../../js/jquery.flexslider-min.js"></script>
	
	
	<!-- MAIN JS -->
	<script src="../../js/main.js"></script>

	</body>
</html>

